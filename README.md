# MCTS 路径规划

基于蒙特卡洛树搜索 (Monte Carlo Tree Search) 算法的 2D 栅格地图路径规划项目。

## 项目简介

本项目实现了 MCTS 算法来解决机器人在 2D 栅格地图中的静态路径规划问题，从起点到终点寻找可行路径，同时避开障碍物。

## 算法实现

### MCTS 四个核心步骤

1. **选择 (Selection)**：从根节点开始，使用 UCB1 策略选择子节点，平衡探索与利用
   ```
   UCB1 = Q(s)/N(s) + c * sqrt(ln(N(parent)) / N(s))
   ```
   - `Q(s)`: 节点累计价值
   - `N(s)`: 节点访问次数
   - `c`: 探索常数 (默认 √2)

2. **扩展 (Expansion)**：对未完全扩展的节点，随机选择一个未尝试的动作创建新子节点

3. **模拟 (Simulation)**：从新节点执行随机策略的 rollout，采用 80% 贪心 + 20% 随机的混合策略

4. **回溯 (Backpropagation)**：将模拟结果沿路径向上传播，更新所有祖先节点的访问次数和价值

### 奖励设计

- 到达目标：+100
- 每走一步：-0.1
- 接近目标：+1.0 × 距离减少量
- 进入死路：-10

## 运行方式

```bash
# 基本演示
python main.py

# 自定义参数
python main.py --size 50 --density 0.3 --iterations 10000

# 性能测试
python main.py --benchmark
```

## 实验结果

### 单次运行示例 (30×30 地图, 20% 障碍物密度)

| 算法 | 路径长度 | 搜索节点 | 计算时间 |
|------|---------|---------|---------|
| MCTS | 67 步 | 1003 | 0.092s |
| A* | 59 步 | 409 | 0.001s |
| Dijkstra | 59 步 | 715 | 0.001s |

MCTS 路径质量：113.56% (相对于 A* 最优路径)

### 综合测试结果

在 30×30 和 50×50 地图、10%-30% 障碍物密度下多次测试：

| 指标 | MCTS | A* | Dijkstra |
|------|------|----|----|
| 计算时间 | 0.08-0.54s | <0.01s | <0.02s |
| 路径质量 | 接近最优 (1.1-1.4倍) | 最优 | 最优 |
| 搜索节点 | ~1000-5000 | 200-2000 | 600-2300 |

### 结论

- **路径质量**：MCTS 路径长度约为 A* 最优路径的 1.1-1.4 倍，在大多数场景下接近最优
- **计算时间**：MCTS 比 A*/Dijkstra 慢约 50-100 倍，但绝对时间仍在可接受范围内 (<1s)
- **适用场景**：MCTS 更适合动态环境或需要在线决策的场景，传统算法在静态路径规划中效率更高

